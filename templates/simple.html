<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathruseva Foundation - Working Version</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .card { margin: 20px 0; }
        .chart-container { height: 300px; }
        .nav-link { cursor: pointer; }
        .content-section { display: none; }
        .content-section.active { display: block; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-heart me-2"></i>Mathruseva Foundation
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link text-white" onclick="showSection('dashboard')">Dashboard</a>
                <a class="nav-link text-white" onclick="showSection('attendance')">Attendance</a>
                <a class="nav-link text-white" onclick="showSection('analytics')">Analytics</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section active">
            <h2>Dashboard</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5>Total Volunteers</h5>
                            <h3 id="totalVolunteers">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5>Total Camps</h5>
                            <h3 id="totalCamps">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5>Total Donations</h5>
                            <h3 id="totalDonations">$0</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Attendance Section -->
        <div id="attendance" class="content-section">
            <h2>Attendance Tracker</h2>
            <button class="btn btn-primary mb-3" onclick="showAttendanceModal()">Mark Attendance</button>
            
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Present</h5>
                            <h3 class="text-success" id="totalPresent">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Absent</h5>
                            <h3 class="text-danger" id="totalAbsent">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Late</h5>
                            <h3 class="text-warning" id="totalLate">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5>Attendance Rate</h5>
                            <h3 class="text-info" id="attendanceRate">0%</h3>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h5>Attendance Records</h5>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Volunteer</th>
                                <th>Camp</th>
                                <th>Date</th>
                                <th>Check In</th>
                                <th>Check Out</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTableBody">
                            <tr><td colspan="6" class="text-center">No attendance records found</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics" class="content-section">
            <h2>Analytics Dashboard</h2>
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5>Volunteer Performance</h5>
                            <div class="chart-container">
                                <canvas id="volunteerPerformanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5>Donation Impact</h5>
                            <div class="chart-container">
                                <canvas id="donationImpactChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5>Weekly Attendance Trend</h5>
                            <div class="chart-container">
                                <canvas id="attendanceTrendChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h5>Camp Distribution</h5>
                            <div class="chart-container">
                                <canvas id="campDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div class="modal fade" id="attendanceModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Mark Attendance</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="attendanceForm">
                        <div class="mb-3">
                            <label class="form-label">Volunteer</label>
                            <select class="form-select" id="attendanceVolunteer" required>
                                <option value="">Select Volunteer</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Camp</label>
                            <select class="form-select" id="attendanceCamp" required>
                                <option value="">Select Camp</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Date</label>
                            <input type="date" class="form-control" id="attendanceDateModal" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Check In Time</label>
                            <input type="time" class="form-control" id="checkInTime" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Check Out Time</label>
                            <input type="time" class="form-control" id="checkOutTime">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="attendanceStatus" required>
                                <option value="">Select Status</option>
                                <option value="present">Present</option>
                                <option value="absent">Absent</option>
                                <option value="late">Late</option>
                                <option value="half_day">Half Day</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" id="attendanceNotes"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="markAttendance()">Mark Attendance</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <script>
        // Simple working JavaScript
        console.log('Simple app loaded!');
        
        let currentSection = 'dashboard';
        
        function showSection(sectionId) {
            console.log('Showing section:', sectionId);
            
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.classList.add('active');
            }
            
            currentSection = sectionId;
            
            // Load section-specific content
            if (sectionId === 'analytics') {
                initializeCharts();
            } else if (sectionId === 'attendance') {
                loadAttendance();
            }
        }
        
        function showAttendanceModal() {
            const modal = new bootstrap.Modal(document.getElementById('attendanceModal'));
            modal.show();
            loadAttendanceOptions();
        }
        
        function loadAttendanceOptions() {
            // Set today's date
            document.getElementById('attendanceDateModal').value = new Date().toISOString().split('T')[0];
            
            // Load sample volunteers
            const volunteerSelect = document.getElementById('attendanceVolunteer');
            volunteerSelect.innerHTML = `
                <option value="">Select Volunteer</option>
                <option value="1">John Smith</option>
                <option value="2">Sarah Johnson</option>
                <option value="3">Mike Wilson</option>
            `;
            
            // Load sample camps
            const campSelect = document.getElementById('attendanceCamp');
            campSelect.innerHTML = `
                <option value="">Select Camp</option>
                <option value="1">Eye Camp Mumbai</option>
                <option value="2">Blood Donation Drive</option>
                <option value="3">General Health Camp</option>
            `;
        }
        
        function markAttendance() {
            alert('Attendance marked successfully!');
            const modal = bootstrap.Modal.getInstance(document.getElementById('attendanceModal'));
            modal.hide();
            loadAttendance();
        }
        
        function loadAttendance() {
            console.log('Loading attendance...');
            // Update stats with sample data
            document.getElementById('totalPresent').textContent = '15';
            document.getElementById('totalAbsent').textContent = '3';
            document.getElementById('totalLate').textContent = '2';
            document.getElementById('attendanceRate').textContent = '83%';
            
            // Load sample attendance records
            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = `
                <tr>
                    <td>John Smith</td>
                    <td>Eye Camp Mumbai</td>
                    <td>2024-02-15</td>
                    <td>09:00</td>
                    <td>17:00</td>
                    <td><span class="badge bg-success">Present</span></td>
                </tr>
                <tr>
                    <td>Sarah Johnson</td>
                    <td>Blood Donation Drive</td>
                    <td>2024-02-20</td>
                    <td>09:30</td>
                    <td>16:30</td>
                    <td><span class="badge bg-warning">Late</span></td>
                </tr>
                <tr>
                    <td>Mike Wilson</td>
                    <td>General Health Camp</td>
                    <td>2024-02-25</td>
                    <td>10:00</td>
                    <td>15:00</td>
                    <td><span class="badge bg-danger">Absent</span></td>
                </tr>
            `;
        }
        
        function initializeCharts() {
            console.log('Initializing charts...');
            
            // Volunteer Performance Chart
            const volunteerCtx = document.getElementById('volunteerPerformanceChart');
            if (volunteerCtx) {
                new Chart(volunteerCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Active', 'Inactive', 'On Leave', 'New'],
                        datasets: [{
                            data: [15, 3, 2, 5],
                            backgroundColor: ['#28a745', '#dc3545', '#ffc107', '#17a2b8']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
            
            // Donation Impact Chart
            const donationCtx = document.getElementById('donationImpactChart');
            if (donationCtx) {
                new Chart(donationCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Donations ($)',
                            data: [12000, 19000, 15000, 22000, 18000, 25000],
                            backgroundColor: '#007bff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Attendance Trend Chart
            const attendanceCtx = document.getElementById('attendanceTrendChart');
            if (attendanceCtx) {
                new Chart(attendanceCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Attendance Rate (%)',
                            data: [85, 88, 92, 87, 90, 75, 70],
                            borderColor: '#28a745',
                            backgroundColor: 'rgba(40, 167, 69, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Camp Distribution Chart
            const campCtx = document.getElementById('campDistributionChart');
            if (campCtx) {
                new Chart(campCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['Eye Camps', 'Blood Donation', 'General Health', 'Donation Drives'],
                        datasets: [{
                            data: [12, 8, 15, 6],
                            backgroundColor: ['#007bff', '#dc3545', '#28a745', '#ffc107']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
        }
        
        // Initialize dashboard on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded!');
            
            // Load dashboard stats
            document.getElementById('totalVolunteers').textContent = '25';
            document.getElementById('totalCamps').textContent = '41';
            document.getElementById('totalDonations').textContent = '$103,000';
        });
    </script>
</body>
</html>
